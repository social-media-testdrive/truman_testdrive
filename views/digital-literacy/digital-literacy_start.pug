extends ../ui_layout

block content

  .ui.text.container(style="margin-bottom:4em;")
    br
    #learn.ui.raised.segment
      h3.ui.header
        i.book.blue.icon
        .content
          | Learn
      hr
      h5.ui.header
        i.arrow.circle.right.blue.icon
        .content
          | Social media is a great way to get news quickly and easily. Your friends may like or share articles that are interesting to you. 
      h5.ui.header
        i.arrow.circle.right.blue.icon
        .content
          | But you have to be careful! Sometimes people share articles on social media that look like accurate news but actually include false or untrustworthy information.
      br
      #ideas_next.button.ui.mini.green.right.labeled.icon.button
              i.down.arrow.icon
              |   Next
    

    
    #key_ideas.ui.segment.hidden
      h3.ui.header
        i.key.blue.icon
        .content Key Ideas
      .sub.header 
        i.hand.pointer.icon(style="color:gray;")
        span(style="color: gray;") Click on each label below to learn more
      br
      //- .ui.segments     
      .ui.stackable.two.column.grid
        .ui.column
          #source.ui.raised.segment
            a.ui.blue.ribbon.label#sourceLabel
                //- i.dollar.sign.icon 
                span Source
            span.hidden(id="source_info", style="font-weight:600") The website, organization, or person the information comes from.
        .ui.column
          #credible.ui.raised.segment
            a.ui.blue.ribbon.label#credibleLabel
                //- i.magic.icon 
                span Credible
            span.hidden(id="credible_info",style="font-weight:600") Believable and trustworthy
        .ui.column
          #news.ui.raised.segment
            a.ui.blue.ribbon.label#newsLabel
                //- i.magic.icon 
                span Fake news
            span.hidden(id="news_info",style="font-weight:600") A news story that looks real but has been made up.
        .ui.column
          #clickbait.ui.raised.segment
            a.ui.blue.ribbon.label#clickbaitLabel
                //- i.magic.icon 
                span Clickbait
            span.hidden(id="clickbait_info",style="font-weight:600") An article that has a catchy headline to get people to click on it.

    #question.ui.segment.hidden
      h3.ui.header
        i.question.circle.outline.blue.icon
        .content Why does fake news exist?
          .sub.header 
            i.hand.pointer.icon 
            span Click on each label below to learn more
      //- .ui.segments     
      .ui.stackable.two.column.grid
        .ui.column
          #money.ui.raised.segment
            a.ui.blue.ribbon.label#moneyLabel
                i.dollar.sign.icon 
                span Money
            span.hidden(id="money_info", style="font-weight:600") Each time someone clicks on a news article, the website makes more money. So, websites create news articles that draw people's attention. They don't care whether the information is true or not.
        .ui.column
          #influence.ui.raised.segment
            a.ui.blue.ribbon.label#influenceLabel
                i.magic.icon 
                span Influence
            span.hidden(id="influence_info",style="font-weight:600") Other times, people write misleading articles to spread their beliefs, presenting their opinions as facts.            
      br
    .ui.warning.message#clickNextWarning(style="display:none;")
      .header
       | Click "Next"
    .ui.warning.message#clickLabelsWarning(style="display:none;")
     .header
      | Click on each label to proceed   
    a(href='javascript:void(0);', onclick='javascript:startIntro();')
      .ui.labeled.icon.button
          i.rocket.icon
          |   Got it!   
          
      
block scripts
  script().
  
    //functions  to animate any unclicked labels, used for error messaging
    function animateUnclickedLabels1() {
      if($('#source_info').is(":hidden")){
        $('#sourceLabel').transition('bounce');
      }
      if($('#credible_info').is(":hidden")){
        $('#credibleLabel').transition('bounce');
      }
      if($('#news_info').is(":hidden")){
        $('#newsLabel').transition('bounce');
      }
      if($('#clickbait_info').is(":hidden")){
        $('#clickbaitLabel').transition('bounce');
      }
    };
    
    function animateUnclickedLabels2() {
      if($('#influence_info').is(":hidden")){
        $('#influenceLabel').transition('bounce');
      }
      if($('#money_info').is(":hidden")){
        $('#moneyLabel').transition('bounce');
      }
    };
    
    //Old code, did my best to read and comment 
    
    var incomplete_activities = ($('#key_ideas').is(":hidden") ||  $('#influence_info').is(":hidden") || $('#money_info').is(":hidden"));
    
    $('#ideas_next').on('click', function () { 
      $('#clickNextWarning').hide();      
      $('#key_ideas').show(); 
      $('#key_ideas').transition('jiggle');     
    });

    $('#money>a').on('click', function () {      
        $('#money_info').show(); 
        $('#money').transition('tada');     
        if(!($('#influence_info').is(":hidden") || $('#money_info').is(":hidden"))){
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });

    $('#influence>a').on('click', function () {      
        $('#influence_info').show();      
        $('#influence').transition('tada');     
        if(!($('#influence_info').is(":hidden") || $('#money_info').is(":hidden"))){
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });

    $('#source>a').on('click', function () {      
        $('#source_info').show();      
        $('#source').transition('tada');     
        if(!($('#key_ideas').is(":hidden") ||  $('#credible_info').is(":hidden") || 
             $('#news_info').is(":hidden") ||  $('#news_info').is(":hidden") 
             ||  $('#clickbait_info').is(":hidden")))
        {
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });

    $('#credible>a').on('click', function () {      
        $('#credible_info').show();      
        $('#credible').transition('tada');     
        if(!($('#key_ideas').is(":hidden") ||  $('#credible_info').is(":hidden") || 
             $('#news_info').is(":hidden") ||  $('#news_info').is(":hidden") 
             ||  $('#clickbait_info').is(":hidden")))
        {
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });    

    $('#news>a').on('click', function () {      
        $('#news_info').show();      
        $('#news').transition('tada');     
        if(!($('#key_ideas').is(":hidden") ||  $('#credible_info').is(":hidden") || 
             $('#news_info').is(":hidden") ||  $('#news_info').is(":hidden") 
             ||  $('#clickbait_info').is(":hidden")))
        {
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });

    $('#clickbait>a').on('click', function () {      
        $('#clickbait_info').show();      
        $('#clickbait').transition('tada');     
        if(!($('#key_ideas').is(":hidden") ||  $('#credible_info').is(":hidden") || 
             $('#news_info').is(":hidden") ||  $('#news_info').is(":hidden") 
             ||  $('#clickbait_info').is(":hidden")))
        {
          $("#clickLabelsWarning").hide();
          $('.ui.labeled.icon.button').addClass('green');
        }
    });
    

    function startIntro(){
      
      if($("#key_ideas").is(":hidden") && $("#question").is(":not(:visible)")){
        $("#clickNextWarning").show();
        $("#ideas_next").transition("bounce");
      }

       if(($('.ui.raised.segment').is(":hidden") &&  $('#key_ideas').is(":hidden") &&  $('#question').is(":visible")))
        {          
            if(!($('#question').is(":hidden") ||  $('#influence_info').is(":hidden") || $('#money_info').is(":hidden"))){
              $('#clickLabelsWarning').hide();
              window.location.href='/tutorial/digital-literacy';
            } else {
              $('#clickLabelsWarning').show();
              animateUnclickedLabels2();
            }
        } else if(($('#key_ideas').is(":hidden") ||  $('#credible_info').is(":hidden") || $('#news_info').is(":hidden") ||  $('#news_info').is(":hidden") ||  $('#clickbait_info').is(":hidden"))){          
          if($("#key_ideas").is(":not(:hidden)")){
            $('#clickLabelsWarning').show();
            animateUnclickedLabels1();
          }
        } else {
          $('#learn').hide();
          $('#key_ideas').hide(); 
          $('#question').show(); 
          $('.ui.labeled.icon.button').removeClass('green');

        }          
      };
