extends ui_layout
  
block content
  .computer.only.tablet.only.four.wide.column 
    .ui.sticky.sideMenu
      .ui.card
        .image
          if user.profile.picture
            img(src=cdn+'/profile_pictures/'+user.profile.picture)
          else
            img(src=user.gravatar(60))
        .content
          a.header= user.profile.name || user.email || user.id
          .meta="@Guest"
          .description=user.profile.bio
          .description
            if user.profile.location
              i.marker.icon
              span=user.profile.location
        .one.ui.bottom.attached.icon.buttons
            button.ui.editprofile.button(data-tooltip='Update Your Profile', data-position='bottom left')
              i.write.icon
      button.ui.big.green.button.goBack
        i.icon.reply
        | Go back

  #content.eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column
    if posts.length === 0
      h3.centerText No Posts Yet
    each val in posts
      include partials/script/userPost
  .computer.only.tablet.only.four.wide.column

block scripts
  script. 
    // add humanized time to all posts
    function addHumanizedTimeToPost(){
      let target = $(this);
      var ms = parseInt(target.text(), 10);
      let time = new Date(ms);
      target.text(humanized_time_span(time));
    };
    
  script.
    $(window).on('load', () => {
      $('.right.floated.time.meta, .date.sim').each(addHumanizedTimeToPost);
      $('button.ui.big.green.button.goBack').on('click', function () {
        window.history.back();
      });
    });